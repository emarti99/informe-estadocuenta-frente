<!-- cabecera -->
<div class="cabecera p-d-flex p-jc-center p-mb-4">
  <img src="https://calculadora.sancristobal.coop.py/assets/imagenes/csc-imagotipo-eslogan.svg" alt="logo">
</div>


<!-- buscador -->
<div class="p-d-flex p-col-12 p-jc-center p-mb-2 buscador">
  <!-- <button type="button" pButton pRipple label="Buscar"></button> -->
  <p-autoComplete [(ngModel)]="socioSeleccionado" [suggestions]="sociosSugeridos"
    (completeMethod)="autoCompletado($event)" [size]="15" [showEmptyMessage]="true" emptyMessage="Datos no encontrados"
    field="sosu_nombre" [minLength]="3" [virtualScroll]="false" [dropdown]="true" placeholder="Buscá">

    <ng-template let-socio pTemplate="item">
      <div style="font-size:11px; width:100%" (click)="buscar(socio.sosu_nro_cedula)">{{ socio.sosu_nombre }}
        {{ socio.sosu_apellido }} - CI:
        {{ socio.sosu_nro_cedula | number:'1.0':'py' }} - SOC: {{ socio.sosu_nro_socio | number:'1.0':'py' }} - TEL:
        {{ socio.sosu_telefono }}
      </div>
    </ng-template>
  </p-autoComplete>
</div>

<p-scrollTop [threshold]="2"></p-scrollTop>


<!-- botones -->
<div *ngIf="estadoCuenta" class="p-d-flex imprimir">
  <button pButton pRipple type="button" label=" " (click)="expandirTodo()" class="p-button-raised"
    [class]="{'p-button-success': expandir, 'p-button-danger': !expandir}">
    <a *ngIf="expandir">Expandir</a>
    <a *ngIf="!expandir">Contraer</a>
  </button>

  <button pButton pRipple type="button" icon="pi pi-print" class="p-button-raised" (click)=" imprimir()"></button>
</div>


<!-- Cargando -->
<div *ngIf="!cargando" class="contenedor-cargando">
  <i class="pi pi-spin pi-spinner"></i>
</div>


<!-- contenedor principal -->
<div *ngIf="cargando && estadoCuenta" class="contenedor-principal p-grid p-m-auto" id="contenedor-principal">

  <app-resumen-general [datosPersonales]="estadoCuenta.datos_personales"
    [datosAnaliticos]="estadoCuenta.datos_analiticos" class="p-d-flex p-jc-center p-mb-4 p-mt-4 resumenGeneral">
  </app-resumen-general>


  <!-- Datos laborales  -->
  <p-fieldset [toggleable]="true">
    <ng-template pTemplate="header" class="sumatoria">
      <p class="titulo" class="p-mr-2">Datos Laborales</p>
      <p pTooltip="Salario actual">
        {{ estadoCuenta.datos_analiticos.daan_salario_actual | currency:'PYG':'symbol-narrow':'1.0':'py' }}</p>
    </ng-template>
    <app-datos-laborales [datosLaborales]="estadoCuenta.datos_laborales"
      class="p-d-flex p-flex-column p-ai-center p-shadow-2">
    </app-datos-laborales>
  </p-fieldset>


  <!-- Préstamos -->
  <p-fieldset [toggleable]="true">
    <ng-template pTemplate="header" class="sumatoria">
      <div class="p-d-flex" pTooltip="Total saldo restante">
        <p class="p-mr-2">Préstamos</p>
        <p>
          {{ estadoCuenta.datos_analiticos.daan_saldos_pendientes.sape_prestamos | currency:'PYG':'symbol-narrow':'1.0':'py' }}
        </p>
      </div>
    </ng-template>
    <app-prestamos [prestamos]="estadoCuenta.prestamos" class="p-d-flex p-flex-column p-ai-center p-shadow-2">
    </app-prestamos>
  </p-fieldset>


  <!-- Tarjetas -->
  <p-fieldset [toggleable]="true">
    <ng-template pTemplate="header" class="sumatoria">
      <div class="p-d-flex" pTooltip="Total saldo restante">
        <p class="p-mr-2">Tarjetas</p>
        <p>
          {{ estadoCuenta.datos_analiticos.daan_saldos_pendientes.sape_tarjetas | currency:'PYG':'symbol-narrow':'1.0':'py' }}
        </p>
      </div>
    </ng-template>
    <app-tarjetas [tarjetas]="estadoCuenta.tarjetas" class="p-d-flex p-flex-column p-ai-center p-shadow-2">
    </app-tarjetas>
  </p-fieldset>


  <!-- Ahorros -->
  <p-fieldset [toggleable]="true">
    <ng-template pTemplate="header" class="sumatoria">
      <div class="p-d-flex" pTooltip="Total">
        <p class="p-mr-2">Ahorros</p>
        <p>
          {{ estadoCuenta.datos_analiticos.daan_total_ahorros | currency:'PYG':'symbol-narrow':'1.0':'py' }}</p>
      </div>
    </ng-template>
    <app-ahorros [ahorros]="estadoCuenta.ahorros" class="p-d-flex p-flex-column p-ai-center p-shadow-2">></app-ahorros>
  </p-fieldset>

  <!-- Gestión cobranza -->
  <p-fieldset [toggleable]="true">
    <ng-template pTemplate="header" class="sumatoria">
      <div class="p-d-flex" pTooltip="Total cobranza restante">
        <p class="p-mr-2">Gestión cobranza</p>
        <p>
          {{ estadoCuenta.datos_analiticos.daan_saldos_pendientes.sape_cobranzas | currency:'PYG':'symbol-narrow':'1.0':'py' }}
        </p>
      </div>
    </ng-template>
    <app-gestion-cobranza [gestionCobranza]="estadoCuenta.gestion_cobranza"
      class="p-d-flex p-flex-column p-ai-center p-shadow-2">
    </app-gestion-cobranza>
  </p-fieldset>

</div>
